machine:
  environment:
    CC: gcc
    CXX: g++
    PKG_CONFIG_PATH: $HOME/$CIRCLE_PROJECT_REPONAME/lib/pkgconfig
checkout:
  post:
    #- git submodule sync
    #- git submodule update --init
dependencies:
  pre:
    - mkdir -p ${GOPATH%%:*}/src/github.com/wellington
    - rsync -av $HOME/$CIRCLE_PROJECT_REPONAME ${GOPATH%%:*}/src/github.com/wellington --exclude .git
    #- make deps
    #- echo $PKG_CONFIG_PATH
  override:
    - go get -f -u
    - go build -i
test:
  override:
    - go test ./...
